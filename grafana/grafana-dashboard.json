{
  "id": null,
  "uid": "mlops-fastapi-dashboard",
  "title": "MLOps Stock Prediction Overview",
  "timezone": "browser",
  "schemaVersion": 39,
  "version": 3,
  "refresh": "5s",
  "panels": [
    {
      "type": "row",
      "title": "Infrastructure Health",
      "gridPos": {
        "x": 0,
        "y": 0,
        "w": 24,
        "h": 1
      },
      "collapsed": false,
      "panels": []
    },
    {
      "type": "gauge",
      "title": "CPU Usage",
      "gridPos": {
        "x": 0,
        "y": 1,
        "w": 6,
        "h": 4
      },
      "targets": [
        {
          "expr": "system_cpu_percent",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "min": 0,
          "max": 100,
          "unit": "percent",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "#EAB839",
                "value": 60
              },
              {
                "color": "red",
                "value": 85
              }
            ]
          }
        }
      }
    },
    {
      "type": "stat",
      "title": "RAM Used",
      "gridPos": {
        "x": 6,
        "y": 1,
        "w": 6,
        "h": 4
      },
      "targets": [
        {
          "expr": "system_ram_used_mb",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "decbytes",
          "color": {
            "mode": "fixed"
          }
        }
      }
    },
    {
      "type": "stat",
      "title": "Disk Used",
      "gridPos": {
        "x": 12,
        "y": 1,
        "w": 6,
        "h": 4
      },
      "targets": [
        {
          "expr": "system_disk_used_mb",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "decbytes",
          "color": {
            "mode": "fixed"
          }
        }
      }
    },
    {
      "type": "timeseries",
      "title": "API Request Rate (RPS)",
      "gridPos": {
        "x": 18,
        "y": 1,
        "w": 6,
        "h": 4
      },
      "targets": [
        {
          "expr": "sum(rate(http_requests_total[1m]))",
          "refId": "A",
          "legendFormat": "Total Requests"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10,
            "showPoints": "never"
          }
        }
      }
    },
    {
      "type": "row",
      "title": "Model Training Performance",
      "gridPos": {
        "x": 0,
        "y": 5,
        "w": 24,
        "h": 1
      },
      "collapsed": false,
      "panels": []
    },
    {
      "type": "timeseries",
      "title": "Training Duration (Seconds)",
      "gridPos": {
        "x": 0,
        "y": 6,
        "w": 12,
        "h": 6
      },
      "targets": [
        {
          "expr": "training_duration_seconds_sum",
          "legendFormat": "{{task}}",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "API Traffic by Route",
      "gridPos": {
        "x": 12,
        "y": 6,
        "w": 6,
        "h": 6
      },
      "targets": [
        {
          "expr": "sum by (handler) (rate(http_requests_total[5m]))",
          "legendFormat": "{{handler}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10
          }
        }
      }
    },
    {
      "type": "stat",
      "title": "Redis Records",
      "gridPos": {
        "x": 18,
        "y": 6,
        "w": 6,
        "h": 6
      },
      "targets": [
        {
          "expr": "redis_keys_total",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          }
        }
      }
    },
    {
      "type": "row",
      "title": "Business Metrics: Model Usage",
      "gridPos": {
        "x": 0,
        "y": 12,
        "w": 24,
        "h": 1
      },
      "collapsed": false,
      "panels": []
    },
    {
      "type": "stat",
      "title": "Total Predictions Served",
      "gridPos": {
        "x": 0,
        "y": 13,
        "w": 6,
        "h": 4
      },
      "targets": [
        {
          "expr": "sum(prediction_total)",
          "refId": "A"
        }
      ],
      "options": {
        "reduceOptions": {
          "calcs": [
            "last"
          ]
        }
      }
    },
    {
      "type": "timeseries",
      "title": "Prediction Traffic Source",
      "gridPos": {
        "x": 6,
        "y": 13,
        "w": 18,
        "h": 8
      },
      "targets": [
        {
          "expr": "increase(prediction_total{type=\"parent\"}[5m])",
          "legendFormat": "Generic Market Model (^GSPC)",
          "refId": "A"
        },
        {
          "expr": "increase(prediction_total{type=\"child\"}[5m])",
          "legendFormat": "Specific Stock (Transfer Learning)",
          "refId": "B"
        }
      ]
    },
    {
      "type": "row",
      "title": "Service Latency Overview",
      "gridPos": {
        "x": 0,
        "y": 21,
        "w": 24,
        "h": 1
      },
      "collapsed": true,
      "panels": []
    },
    {
      "type": "heatmap",
      "title": "Prediction Latency",
      "gridPos": {
        "x": 0,
        "y": 22,
        "w": 24,
        "h": 8
      },
      "targets": [
        {
          "expr": "rate(prediction_latency_seconds_bucket[5m])",
          "refId": "A"
        }
      ]
    }
  ]
}